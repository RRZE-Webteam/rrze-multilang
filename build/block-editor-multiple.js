(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.plugins,n=window.wp.editPost,s=window.wp.components,l=window.wp.compose,o=window.wp.element,a=window.wp.data,i=window.wp.i18n,r=window.wp.apiFetch;var c=e.n(r);const g=window.ReactJSXRuntime;(0,t.registerPlugin)("rrze-multilang-language-panel",{render:function(){const e=(0,a.useSelect)((e=>Object.assign({},e("core/editor").getCurrentPost(),rrzeMultilang.currentPost)));if(-1==rrzeMultilang.localizablePostTypes.indexOf(e.type))return(0,g.jsx)(g.Fragment,{});if("auto-draft"==e.status)return(0,g.jsx)(g.Fragment,{});const[t,r]=(0,o.useState)(e.secondarySitesToLink),[u,d]=(0,o.useState)(e.secondarySitesToCopy),p=()=>{const n=[];Object.entries(t).forEach((([t,o])=>{let r=o.name+" â€” "+o.language,u=o.selected;const d=(0,l.withState)({link:u})((({link:t,setState:n})=>(0,g.jsx)(s.SelectControl,{label:r,value:t,options:o.options,onChange:(t,s)=>{n({link:t});let l=t.split(":"),o=l[0],r=l[1];c()({path:"/rrze-multilang/v1/link/"+e.id+"/blog/"+o+"/post/"+r,method:"POST"}).then((e=>{let t=e[r].blogName,n=e[r].postTitle;(0,a.dispatch)("core/notices").createInfoNotice((0,i.__)(`Linked to ${n} on ${t}.`,"rrze-multilang"),{isDismissible:!0,type:"snackbar",speak:!0})}))}})));n.push((0,g.jsx)(s.PanelRow,{children:(0,g.jsx)(d,{})}))}));const o=e=>e.listItems.length?e.listItems:(0,g.jsx)("em",{children:(0,i.__)("There are no websites available for translations.","rrze-multilang")});return(0,g.jsx)(o,{listItems:n})},m=()=>{const t=[];let n=0;Object.entries(u).forEach((([o,r])=>{const p=(0,l.withState)({blogId:o})((({blogId:e,setState:t})=>(0,g.jsx)(s.SelectControl,{label:(0,i.__)("Copy To:","rrze-multilang"),value:e,options:r.options,onChange:e=>{t({blogId:e}),n=e}})));null==r.creating?(t.push((0,g.jsx)(s.PanelRow,{children:(0,g.jsx)(p,{})})),t.push((0,g.jsx)(s.Button,{isSecondary:!0,onClick:()=>{(t=>{const n=Object.assign({},u);n[t]={creating:!0},d(n),c()({path:"/rrze-multilang/v1/copy/"+e.id+"/blog/"+t,method:"POST"}).then((e=>{const n=Object.assign({},u);n[t]={blogId:e[t].blogId,blogName:e[t].blogName,creating:!1},d(n);let s=n[t].blogName;(0,a.dispatch)("core/notices").createInfoNotice((0,i.__)(`A copy has been added to ${s}.`,"rrze-multilang"),{isDismissible:!0,type:"snackbar",speak:!0})}))})(n)},children:(0,i.__)("Add Copy","rrze-multilang")}))):r.creating&&t.push((0,g.jsx)(s.Spinner,{}))}));const o=e=>e.listItems.length?e.listItems:(0,g.jsx)(g.Fragment,{});return(0,g.jsx)(o,{listItems:t})};return(0,g.jsxs)(n.PluginDocumentSettingPanel,{name:"rrze-multilang-language-panel",title:(0,i.__)("Language","rrze-multilang"),className:"rrze-multilang-language-panel",children:[(0,g.jsx)(p,{}),(0,g.jsx)(m,{})]})},icon:"translation"})})();