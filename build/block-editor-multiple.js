(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.plugins,n=window.wp.editor,r=window.wp.components,s=window.wp.element,i=window.wp.data,a=window.wp.i18n,l=window.wp.apiFetch;var o=e.n(l);const c=window.ReactJSXRuntime;(0,t.registerPlugin)("rrze-multilang-language-panel",{render:function(){const e=(0,i.useSelect)((e=>Object.assign({},e("core/editor").getCurrentPost(),rrzeMultilang.currentPost))),[t,l]=(0,s.useState)(e.secondarySitesToLink||{}),[g,u]=(0,s.useState)(e.secondarySitesToCopy||{});if(-1===rrzeMultilang.localizablePostTypes.indexOf(e.type))return null;if("auto-draft"===e.status)return null;const p=()=>0===Object.keys(t).length?(0,c.jsx)("em",{children:(0,a.__)("There are no websites available for translations.","rrze-multilang")}):Object.entries(t).map((([t,n])=>{const{name:s,language:g,url:u,options:p,selected:d}=n,m=`${s} â€” ${g}`,h=u,[_,b]=(d||"").split(":"),w=_&&b&&h?(0,c.jsx)("a",{href:`${h}?p=${b}`,target:"_blank",rel:"noopener noreferrer",children:m}):(0,c.jsx)("span",{children:m});return(0,c.jsx)(r.PanelRow,{children:(0,c.jsx)(r.SelectControl,{label:w,value:d,options:p,onChange:n=>{const[r,s]=n.split(":");o()({path:`/rrze-multilang/v1/link/${e.id}/blog/${r}/post/${s}`,method:"POST"}).then((e=>{if(e.code&&e.message)return void(0,i.dispatch)("core/notices").createErrorNotice((0,a.__)(e.message,"rrze-multilang"),{isDismissible:!0,type:"snackbar"});l((e=>({...e,[t]:{...e[t],selected:n}})));const r=Object.keys(e)[0],s=e[r].postTitle,o=e[r].blogName;let c;c=s?(0,a.__)(`Linked to ${s} on ${o}.`,"rrze-multilang"):(0,a.__)(`Unlinked from ${o}.`,"rrze-multilang"),(0,i.dispatch)("core/notices").createInfoNotice(c,{isDismissible:!0,type:"snackbar",speak:!0})})).catch((e=>{(0,i.dispatch)("core/notices").createErrorNotice((0,a.__)(e.message,"rrze-multilang"),{isDismissible:!0,type:"snackbar"})}))}})},t)})),d=()=>{const t=Object.entries(g).map((([t,n])=>{const l=(0,a.__)("Copy To","rrze-multilang"),[p,d]=(0,s.useState)(t);return(0,c.jsxs)("div",{children:[(0,c.jsx)(r.PanelRow,{children:(0,c.jsx)(r.SelectControl,{label:l,value:p,options:n.options,onChange:e=>{d(e)}})}),void 0===n.creating?(0,c.jsx)(r.Button,{isSecondary:!0,onClick:()=>(t=>{const n={...g,[t]:{creating:!0}};u(n),o()({path:`/rrze-multilang/v1/copy/${e.id}/blog/${t}`,method:"POST"}).then((e=>{if(e.code&&e.message){(0,i.dispatch)("core/notices").createErrorNotice((0,a.__)(e.message,"rrze-multilang"),{isDismissible:!0,type:"snackbar"});const n={...g,[t]:{creating:!1,error:e.message}};u(n)}else{const n={...g,[t]:{blogId:e[t].blogId,blogName:e[t].blogName,creating:!1}};u(n);const r=n[t].blogName;(0,i.dispatch)("core/notices").createInfoNotice((0,a.__)(`A copy has been added to ${r}.`,"rrze-multilang"),{isDismissible:!0,type:"snackbar",speak:!0})}})).catch((t=>{(0,i.dispatch)("core/notices").createErrorNotice((0,a.__)(t.message,"rrze-multilang"),{isDismissible:!0,type:"snackbar"}),u(e.secondarySitesToCopy)}))})(p),children:(0,a.__)("Add Copy","rrze-multilang")}):n.creating?(0,c.jsx)(r.Spinner,{}):null]},t)}));return t.length?t:(0,c.jsx)(c.Fragment,{})};return(0,c.jsxs)(n.PluginDocumentSettingPanel,{name:"rrze-multilang-language-panel",title:(0,a.__)("Language","rrze-multilang"),className:"rrze-multilang-language-panel",children:[(0,c.jsx)("h3",{class:"rrze-multilang-setting-panel__h3",children:(0,a.__)("Secondary Sites to Link","rrze-multilang")}),(0,c.jsx)("p",{class:"rrze-multilang-setting-panel__help",children:(0,a.__)("Select the sites where you want to link the current post.","rrze-multilang")}),(0,c.jsx)(p,{}),(0,c.jsx)("hr",{}),(0,c.jsx)("h3",{class:"rrze-multilang-setting-panel__h3",children:(0,a.__)("Secondary Sites to Copy","rrze-multilang")}),(0,c.jsx)("p",{class:"rrze-multilang-setting-panel__help",children:(0,a.__)("Select the sites where you want to create copies of the current post.","rrze-multilang")}),(0,c.jsx)(d,{})]})},icon:"translation"})})();