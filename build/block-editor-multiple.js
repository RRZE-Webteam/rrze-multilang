(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.plugins,n=window.wp.editor,s=window.wp.components,r=window.wp.element,i=window.wp.data,l=window.wp.i18n,a=window.wp.apiFetch;var o=e.n(a);const c=window.ReactJSXRuntime;(0,t.registerPlugin)("rrze-multilang-language-panel",{render:function(){const e=(0,i.useSelect)((e=>Object.assign({},e("core/editor").getCurrentPost(),rrzeMultilang.currentPost))),[t,a]=(0,r.useState)(e.secondarySitesToLink||{}),[p,d]=(0,r.useState)(e.secondarySitesToCopy||{});if(-1===rrzeMultilang.localizablePostTypes.indexOf(e.type))return null;if("auto-draft"===e.status)return null;const g=()=>0===Object.keys(t).length?(0,c.jsx)("em",{children:(0,l.__)("There are no websites available for translations.","rrze-multilang")}):Object.entries(t).map((([t,n])=>{const{name:r,language:p,url:d,options:g,selected:u}=n,m=`${r} â€” ${p}`,[h,b]=(u||"").split(":"),w=h&&b&&d?(0,c.jsx)("a",{href:`${d}/wp-admin/post.php?post=${b}&action=edit`,target:"_blank",rel:"noopener noreferrer",children:m}):(0,c.jsx)("span",{children:m});return(0,c.jsx)(s.PanelRow,{children:(0,c.jsx)(s.SelectControl,{label:w,value:u,options:g,onChange:n=>{const[s,r]=n.split(":");o()({path:`/rrze-multilang/v1/link/${e.id}/blog/${s}/post/${r}`,method:"POST"}).then((e=>{if(e.code&&e.message)return void(0,i.dispatch)("core/notices").createErrorNotice(e.message,{isDismissible:!0,type:"snackbar"});a((e=>({...e,[t]:{...e[t],selected:n}})));const s=Object.keys(e)[0],r=e[s].postTitle,o=e[s].blogName;let c;c=r?(0,l.sprintf)(/* translators: 1: the post title, 2: the blog name */ /* translators: 1: the post title, 2: the blog name */
(0,l.__)("Linked to %1$s on %2$s.","rrze-multilang"),r,o):(0,l.sprintf)(/* translators: %s: the blog name */ /* translators: %s: the blog name */
(0,l.__)("Unlinked from %s.","rrze-multilang"),o),(0,i.dispatch)("core/notices").createInfoNotice(c,{isDismissible:!0,type:"snackbar",speak:!0})})).catch((e=>{(0,i.dispatch)("core/notices").createErrorNotice(e.message,{isDismissible:!0,type:"snackbar"})}))}})},t)})),u=()=>{const n=Object.entries(p).map((([n,g])=>{const u=(0,l.__)("Copy To","rrze-multilang"),[m,h]=(0,r.useState)(n);return(0,c.jsxs)("div",{children:[(0,c.jsx)(s.PanelRow,{children:(0,c.jsx)(s.SelectControl,{label:u,value:m,options:g.options,onChange:e=>{h(e)}})}),void 0===g.creating?(0,c.jsx)(s.Button,{isSecondary:!0,onClick:()=>(n=>{const s=t[n],r=s.selected&&Number(s.selected.split(":")[1])>0;o()({path:`/rrze-multilang/v1/copy/${e.id}/blog/${n}`,method:"POST"}).then((t=>{const c={...p,[n]:{blogId:t[n].blogId,blogName:t[n].blogName,creating:!1}};d(c),(0,i.dispatch)("core/notices").createInfoNotice((0,l.sprintf)(/* translators: %s: the blog name */ /* translators: %s: the blog name */
(0,l.__)("A copy has been added to %s.","rrze-multilang"),c[n].blogName),{isDismissible:!0,type:"snackbar",speak:!0});const{postId:g,postTitle:u}=t[n],m=`${n}:${g}`,h=s.options.some((e=>e.value===m))?s.options:[...s.options,{value:m,label:u}];a((e=>({...e,[n]:{...s,options:h,selected:r?s.selected:m}}))),r||o()({path:`/rrze-multilang/v1/link/${e.id}/blog/${n}/post/${g}`,method:"POST"}).catch((e=>{(0,i.dispatch)("core/notices").createErrorNotice(e.message,{isDismissible:!0,type:"snackbar"})}))})).catch((t=>{(0,i.dispatch)("core/notices").createErrorNotice(t.message,{isDismissible:!0,type:"snackbar"}),d(e.secondarySitesToCopy)}))})(m),children:(0,l.__)("Add Copy","rrze-multilang")}):g.creating?(0,c.jsx)(s.Spinner,{}):null]},n)}));return n.length?n:(0,c.jsx)(c.Fragment,{})};return(0,c.jsxs)(n.PluginDocumentSettingPanel,{name:"rrze-multilang-language-panel",title:(0,l.__)("Language","rrze-multilang"),className:"rrze-multilang-language-panel",children:[(0,c.jsx)("h3",{class:"rrze-multilang-setting-panel__h3",children:(0,l.__)("Secondary Websites to Link","rrze-multilang")}),(0,c.jsx)("p",{class:"rrze-multilang-setting-panel__help",children:(0,l.__)("Select the websites where you want to link the current post.","rrze-multilang")}),(0,c.jsx)(g,{}),(0,c.jsx)("hr",{}),(0,c.jsx)("h3",{class:"rrze-multilang-setting-panel__h3",children:(0,l.__)("Secondary Websites to Copy","rrze-multilang")}),(0,c.jsx)("p",{class:"rrze-multilang-setting-panel__help",children:(0,l.__)("Select the websites where you want to create copies of the current post.","rrze-multilang")}),(0,c.jsx)(u,{})]})},icon:"translation"})})();