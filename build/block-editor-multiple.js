(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.plugins,n=window.wp.element,a=window.wp.editPost,r=window.wp.components,l=window.wp.data,o=window.wp.i18n,s=window.wp.apiFetch;var i=e.n(s);(0,t.registerPlugin)("rrze-multilang-language-panel",{render:function(){const e=(0,l.useSelect)((e=>Object.assign({},e("core/editor").getCurrentPost(),rrzeMultilang.currentPost)));if(-1===rrzeMultilang.localizablePostTypes.indexOf(e.type))return(0,n.createElement)(n.Fragment,null);if("auto-draft"===e.status)return(0,n.createElement)(n.Fragment,null);const[t,s]=(0,n.useState)(e.secondarySitesToLink),[c,g]=(0,n.useState)(e.secondarySitesToCopy);return(0,n.createElement)(a.PluginDocumentSettingPanel,{name:"rrze-multilang-language-panel",title:(0,o.__)("Language","rrze-multilang"),className:"rrze-multilang-language-panel"},(0,n.createElement)((()=>{const a=Object.entries(t).map((([t,a])=>{const s=a.name+" â€” "+a.language,[c,g]=(0,n.useState)(a.selected);return(0,n.createElement)(r.PanelRow,{key:t},(0,n.createElement)(r.SelectControl,{label:s,value:c,options:a.options,onChange:t=>{g(t);const[n,a]=t.split(":");i()({path:`/rrze-multilang/v1/link/${e.id}/blog/${n}/post/${a}`,method:"POST"}).then((e=>{if(e.code&&e.message)(0,l.dispatch)("core/notices").createErrorNotice((0,o.__)(e.message,"rrze-multilang"),{isDismissible:!0,type:"snackbar"});else{const t=e[a].blogName,n=e[a].postTitle;(0,l.dispatch)("core/notices").createInfoNotice((0,o.__)(`Linked to ${n} on ${t}.`,"rrze-multilang"),{isDismissible:!0,type:"snackbar",speak:!0})}})).catch((e=>{(0,l.dispatch)("core/notices").createErrorNotice((0,o.__)(e.message,"rrze-multilang"),{isDismissible:!0,type:"snackbar"})}))}}))}));return a.length?a:(0,n.createElement)("em",null,(0,o.__)("There are no websites available for translations.","rrze-multilang"))}),null),(0,n.createElement)((()=>{const t=Object.entries(c).map((([t,a])=>{const[s,m]=(0,n.useState)(t);return(0,n.createElement)("div",{key:t},(0,n.createElement)(r.PanelRow,null,(0,n.createElement)(r.SelectControl,{label:(0,o.__)("Copy To:","rrze-multilang"),value:s,options:a.options,onChange:e=>{m(e)}})),void 0===a.creating?(0,n.createElement)(r.Button,{isSecondary:!0,onClick:()=>(t=>{const n={...c,[t]:{creating:!0}};g(n),i()({path:`/rrze-multilang/v1/copy/${e.id}/blog/${t}`,method:"POST"}).then((e=>{if(e.code&&e.message){(0,l.dispatch)("core/notices").createErrorNotice((0,o.__)(e.message,"rrze-multilang"),{isDismissible:!0,type:"snackbar"});const n={...c,[t]:{creating:!1,error:e.message}};g(n)}else{const n={...c,[t]:{blogId:e[t].blogId,blogName:e[t].blogName,creating:!1}};g(n);const a=n[t].blogName;(0,l.dispatch)("core/notices").createInfoNotice((0,o.__)(`A copy has been added to ${a}.`,"rrze-multilang"),{isDismissible:!0,type:"snackbar",speak:!0})}})).catch((t=>{(0,l.dispatch)("core/notices").createErrorNotice((0,o.__)(t.message,"rrze-multilang"),{isDismissible:!0,type:"snackbar"}),g(e.secondarySitesToCopy)}))})(s)},(0,o.__)("Add Copy","rrze-multilang")):a.creating?(0,n.createElement)(r.Spinner,null):null)}));return t.length?t:(0,n.createElement)(n.Fragment,null)}),null))},icon:"translation"})})();