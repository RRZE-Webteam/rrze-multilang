(()=>{"use strict";var e={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},d:(n,t)=>{for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.wp.plugins,t=window.wp.url,r=window.wp.apiFetch;var l=e.n(r);const i=window.wp.editPost,s=window.wp.components,a=window.wp.element,o=window.wp.data,u=window.wp.i18n,c=window.ReactJSXRuntime,d=e=>rrzeMultilang.availableLanguages[e]?rrzeMultilang.availableLanguages[e]:e;(0,n.registerPlugin)("rrze-multilang-language-panel",{render:function(){if("undefined"==typeof rrzeMultilang)return(0,c.jsx)(c.Fragment,{});const e=(0,o.useSelect)((e=>Object.assign({},e("core/editor").getCurrentPost(),rrzeMultilang.currentPost)));if(-1==rrzeMultilang.localizablePostTypes.indexOf(e.type))return(0,c.jsx)(c.Fragment,{});const[n,t]=(0,a.useState)(e.translations),r=()=>(0,c.jsxs)(s.PanelRow,{children:[(0,c.jsx)("span",{children:(0,u.__)("Language","rrze-multilang")}),(0,c.jsx)("div",{children:d(e.locale)})]}),g=()=>{const e=[];Object.entries(n).forEach((([n,t])=>{t.editLink&&t.postTitle?e.push((0,c.jsxs)("li",{children:[(0,c.jsx)("a",{href:t.editLink,rel:"noopener noreferrer",children:t.postTitle}),(0,c.jsx)("br",{}),(0,c.jsx)("em",{children:d(n)})]},n)):t.postTitle&&e.push((0,c.jsxs)("li",{children:[t.postTitle,(0,c.jsx)("br",{}),(0,c.jsx)("em",{children:d(n)})]},n))}));const t=e=>e.listItems.length?(0,c.jsx)("ul",{children:e.listItems}):(0,c.jsx)("em",{children:(0,u.__)("None","rrze-multilang")});return(0,c.jsxs)(s.PanelRow,{children:[(0,c.jsx)("span",{children:(0,u.__)("Translations","rrze-multilang")}),(0,c.jsx)(t,{listItems:e})]})},p=()=>{const r=[];return Object.entries(n).forEach((([i,a])=>{a.postId||r.push((0,c.jsxs)("li",{children:[(0,c.jsx)(s.Button,{isSecondary:!0,onClick:()=>{(r=>{const i={...n};i[r]={creating:!0},t(i),l()({path:`/rrze-multilang/v1/posts/${e.id}/translations/${r}`,method:"POST"}).then((e=>{const l={...n};l[r]={postId:e[r].id,postTitle:e[r].title.raw,editLink:e[r].edit_link,creating:!1},t(l),(0,o.dispatch)("core/notices").createInfoNotice((0,u.__)("Translation created.","rrze-multilang"),{isDismissible:!0,type:"snackbar",speak:!0,actions:[{url:l[r].editLink,label:(0,u.__)("Edit Post","rrze-multilang")}]})}))})(i)},children:(0,u.sprintf)(/* translators: %s: Language name. */ /* translators: %s: Language name. */
(0,u.__)("Add %s","rrze-multilang"),d(i))}),a.creating&&(0,c.jsx)(s.Spinner,{})]},i))})),r.length<1||"auto-draft"==e.status?(0,c.jsx)(c.Fragment,{}):(0,c.jsx)(s.PanelRow,{children:(0,c.jsx)("ul",{children:r})})};return(0,c.jsxs)(i.PluginDocumentSettingPanel,{name:"rrze-multilang-language-panel",title:(0,u.__)("Language","rrze-multilang"),className:"rrze-multilang-language-panel",children:[(0,c.jsx)(r,{}),(0,c.jsx)(g,{}),(0,c.jsx)(p,{})]})},icon:"translation"}),l().use(((e,n)=>{const r=rrzeMultilang?rrzeMultilang.currentPost.lang:null;return r&&("string"!=typeof e.url||(0,t.hasQueryArg)(e.url,"lang")||(e.url=(0,t.addQueryArgs)(e.url,{lang:r})),"string"!=typeof e.path||(0,t.hasQueryArg)(e.path,"lang")||(e.path=(0,t.addQueryArgs)(e.path,{lang:r}))),n(e,n)}))})();