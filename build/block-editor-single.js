(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.plugins,n=window.wp.url,l=window.wp.apiFetch;var r=e.n(l);const a=window.wp.element,i=window.wp.editPost,u=window.wp.components,s=window.wp.data,o=window.wp.i18n,c=e=>rrzeMultilang.availableLanguages[e]?rrzeMultilang.availableLanguages[e]:e;(0,t.registerPlugin)("rrze-multilang-language-panel",{render:function(){if("undefined"==typeof rrzeMultilang)return(0,a.createElement)(a.Fragment,null);const e=(0,s.useSelect)((e=>Object.assign({},e("core/editor").getCurrentPost(),rrzeMultilang.currentPost)));if(-1==rrzeMultilang.localizablePostTypes.indexOf(e.type))return(0,a.createElement)(a.Fragment,null);const[t,n]=(0,a.useState)(e.translations);return(0,a.createElement)(i.PluginDocumentSettingPanel,{name:"rrze-multilang-language-panel",title:(0,o.__)("Language","rrze-multilang"),className:"rrze-multilang-language-panel"},(0,a.createElement)((()=>(0,a.createElement)(u.PanelRow,null,(0,a.createElement)("span",null,(0,o.__)("Language","rrze-multilang")),(0,a.createElement)("div",null,c(e.locale)))),null),(0,a.createElement)((()=>{const e=[];return Object.entries(t).forEach((([t,n])=>{n.editLink&&n.postTitle?e.push((0,a.createElement)("li",{key:t},(0,a.createElement)("a",{href:n.editLink,rel:"noopener noreferrer"},n.postTitle),(0,a.createElement)("br",null),(0,a.createElement)("em",null,c(t)))):n.postTitle&&e.push((0,a.createElement)("li",{key:t},n.postTitle,(0,a.createElement)("br",null),(0,a.createElement)("em",null,c(t))))})),(0,a.createElement)(u.PanelRow,null,(0,a.createElement)("span",null,(0,o.__)("Translations","rrze-multilang")),(0,a.createElement)((e=>e.listItems.length?(0,a.createElement)("ul",null,e.listItems):(0,a.createElement)("em",null,(0,o.__)("None","rrze-multilang"))),{listItems:e}))}),null),(0,a.createElement)((()=>{const l=[];return Object.entries(t).forEach((([i,g])=>{g.postId||l.push((0,a.createElement)("li",{key:i},(0,a.createElement)(u.Button,{isSecondary:!0,onClick:()=>{(l=>{const a={...t};a[l]={creating:!0},n(a),r()({path:`/rrze-multilang/v1/posts/${e.id}/translations/${l}`,method:"POST"}).then((e=>{const r={...t};r[l]={postId:e[l].id,postTitle:e[l].title.raw,editLink:e[l].edit_link,creating:!1},n(r),(0,s.dispatch)("core/notices").createInfoNotice((0,o.__)("Translation created.","rrze-multilang"),{isDismissible:!0,type:"snackbar",speak:!0,actions:[{url:r[l].editLink,label:(0,o.__)("Edit Post","rrze-multilang")}]})}))})(i)}},(0,o.sprintf)(/* translators: %s: Language name. */ /* translators: %s: Language name. */
(0,o.__)("Add %s","rrze-multilang"),c(i))),g.creating&&(0,a.createElement)(u.Spinner,null)))})),l.length<1||"auto-draft"==e.status?(0,a.createElement)(a.Fragment,null):(0,a.createElement)(u.PanelRow,null,(0,a.createElement)("ul",null,l))}),null))},icon:"translation"}),r().use(((e,t)=>{const l=rrzeMultilang?rrzeMultilang.currentPost.lang:null;return l&&("string"!=typeof e.url||(0,n.hasQueryArg)(e.url,"lang")||(e.url=(0,n.addQueryArgs)(e.url,{lang:l})),"string"!=typeof e.path||(0,n.hasQueryArg)(e.path,"lang")||(e.path=(0,n.addQueryArgs)(e.path,{lang:l}))),t(e,t)}))})();